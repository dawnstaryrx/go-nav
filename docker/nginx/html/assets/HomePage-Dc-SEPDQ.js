import{H as O}from"./HelloWorld-DqKlw70W.js";import{T as P}from"./TopBar-CpGf_tp8.js";import{R as E}from"./RecursiveCategory-CB-QdkF3.js";import{c as R}from"./category-D9zZmuIX.js";import{a as y}from"./app-BmTou4JB.js";import{_ as S,r as u,u as N,o as L,f as D,g as z,d as A,e as r,c as i,b as n,n as w,F as h,h as x,t as m,a as k,j as K}from"./index-DNkYr-Dp.js";import"./userInfo-C0I0oh51.js";import"./logo-Ox0-xbTo.js";const F={name:"SearchCenter",components:{RecursiveCategory:E},setup(){const p=u(null),a=N(),d=u([]),e=u({username:"admin",categoryId:null}),f=u("ALL");L(()=>{window.addEventListener("keydown",g)}),D(()=>{window.removeEventListener("keydown",g)});const _=async o=>{o.preventDefault();const c=p.value.value.trim();if(c&&c!==""){const C=await y.searchAppByUsername(e.value.username,c);d.value=C.data,console.log("query",c),console.log(C.data),console.log("搜索查询:",c)}else c===""?I():console.log("请输入搜索内容")},g=o=>{if(o.ctrlKey||o.altKey||o.metaKey||o.shiftKey)return;const c=document.activeElement;c.tagName==="INPUT"||c.tagName==="TEXTAREA"||c.isContentEditable||o.key.length===1&&(o.preventDefault(),p.value.focus(),p.value.value=o.key)},t=u([]),s=u(null),l=u(null),B=z(()=>t.value.filter(o=>o.parentId===null)),b=o=>{l.value=o,console.log("选中的分类ID:",l.value.id),o.children.length>0?s.value=o:s.value=s.value,l.value&&s.value&&l.value.id!=s.value.id&&l.value.parentId!==s.value.id&&(s.value=null),e.value.categoryId=l?l.value.id:null,console.log("选中的分类id:",l.value.id,"更新app appListDTO.value.categoryId",e.value.categoryId),v()},H=async()=>{try{const o=await R.getCategoryByUsername(e.value.username,e.value.categoryId);console.log("从后端获取分类数据",o),t.value=o.data}catch(o){console.error(o)}},T=async o=>{await y.clickApp(o)};L(()=>{H()});const v=async()=>{try{if(a.token.token&&a.token.token!==""){const o=await y.getAppByUsernameAndCategoryIdUser(e.value.username,e.value.categoryId);console.log("获取APP",o),d.value=o.data}else{const o=await y.getAppByUsernameAndCategoryIdPublic(e.value.username,e.value.categoryId);console.log("获取APP",o),d.value=o.data}}catch(o){console.error(o)}},I=()=>{e.value.categoryId=null,b.value=null,v()},U=async()=>{const o=await y.getHotAppByUsername(e.value.username);console.log("获取热门APP",o),l.id="hot",d.value=o.data};return v(),{searchInput:p,handleSearch:_,topLevelCategories:B,selectedCategory:s,selectCategory:b,nowCategory:l,appList:d,getAppList:v,getAllApp:I,clickApp:T,getHotApp:U,nowHotOrAll:f}}},M={class:"content-section-search-container"},V={ref:"searchInput",class:"form-control me-2",type:"search",placeholder:"按任意键开始搜索~~","aria-label":"Search",style:{border:"0px","box-shadow":"0 0 0 0rem"}},q={class:"content-section-category-container"},j=["onClick","title"],W={key:0,class:"content-section-category-container",style:{"margin-top":"10px"}},X={class:"row apps-container"},G=["title"],J=["href","onClick"],Q={class:"app-card d-flex align-items-center"},Y={class:"app-logo"},Z=["src"],$={key:1,class:"default-logo rounded-circle"},ee={class:"app-info"},oe={class:"app-title"},te={class:"app-category"},ne={style:{"background-color":"aliceblue"}},ae={style:{"background-color":"beige",float:"right"}},se={class:"app-description"};function le(p,a,d,e,f,_){const g=A("RecursiveCategory");return r(),i(h,null,[n("div",M,[n("form",{class:"d-flex",role:"search",style:{width:"100%"},onSubmit:a[0]||(a[0]=(...t)=>e.handleSearch&&e.handleSearch(...t))},[n("input",V,null,512),a[3]||(a[3]=n("button",{class:"btn custom-search-btn",type:"submit"},[n("svg",{t:"1728041224119",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5573",width:"20",height:"20"},[n("path",{d:"M351.1808 59.2896A435.2 435.2 0 0 1 805.376 715.264 460.8 460.8 0 0 1 351.1808 59.3408z",fill:"#ffffff","p-id":"5574","data-spm-anchor-id":"a313x.search_index.0.i12.117c3a817iUd2m",class:"selected"}),n("path",{d:"M754.3808 722.2272a358.4 358.4 0 1 0-267.8272 120.2176 51.2 51.2 0 0 1 0 102.4 460.8 460.8 0 1 1 365.1584-179.712l118.8864 121.2416c23.7568 24.2176 23.552 63.0272-0.4096 87.04l-0.4096 0.4096a61.184 61.184 0 0 1-86.9888-0.4608l-148.0192-150.9376a61.7984 61.7984 0 0 1 0.4096-86.9888l0.4096-0.4096c5.632-5.5808 11.9808-9.8304 18.7904-12.8z m-467.968-364.5952h409.6a51.2 51.2 0 1 1 0 102.4h-409.6a51.2 51.2 0 1 1 0-102.4z m0 204.8h256a51.2 51.2 0 0 1 0 102.4h-256a51.2 51.2 0 1 1 0-102.4z",fill:"currentColor","p-id":"5575"})])],-1))],32),a[4]||(a[4]=n("br",null,null,-1))]),n("div",q,[n("span",{class:w(["capsule",{"capsule-active":!e.nowCategory&&e.nowHotOrAll==="ALL"}]),onClick:a[1]||(a[1]=t=>{e.nowCategory=null,e.nowHotOrAll="ALL",e.getAllApp()})}," 全部应用 ",2),n("span",{class:w(["capsule",{"capsule-active":!e.nowCategory&&e.nowHotOrAll==="HOT"}]),onClick:a[2]||(a[2]=t=>{e.nowCategory=null,e.nowHotOrAll="HOT",e.getHotApp()})}," 热门应用 ",2),(r(!0),i(h,null,x(e.topLevelCategories,t=>(r(),i("span",{key:t.id,class:w(["capsule",{"capsule-active":e.selectedCategory&&e.selectedCategory.parentId===t.id||e.nowCategory&&e.nowCategory.id===t.id}]),onClick:s=>{e.selectCategory(t)},title:t.description},m(t.name),11,j))),128))]),e.selectedCategory?(r(),i("div",W,[k(g,{category:e.selectedCategory,"now-category":e.nowCategory,onSelectCategory:e.selectCategory},null,8,["category","now-category","onSelectCategory"])])):K("",!0),n("div",X,[(r(!0),i(h,null,x(e.appList,(t,s)=>(r(),i("div",{key:s,class:"col-md-3 col-lg-3 col-sm-4 col-4 app-container",title:t.description},[n("a",{href:t.url,onClick:l=>{e.clickApp(t.id)},style:{"text-decoration":"none"}},[n("div",Q,[n("div",Y,[t.iconUrl!==""?(r(),i("img",{key:0,src:t.iconUrl,alt:"App Logo",class:"img-fluid rounded-circle"},null,8,Z)):(r(),i("div",$,m(t.name.charAt(0)),1))]),n("div",ee,[n("div",oe,m(t.name),1),n("div",te,[n("span",ne,m(t.categoryName),1),a[5]||(a[5]=n("span",{style:{"background-color":"white"}},"   ",-1)),n("span",ae,m(t.clickCount),1)]),n("div",se,m(t.description),1)])])],8,J)],8,G))),128))])],64)}const ce=S(F,[["render",le],["__scopeId","data-v-ebb50616"]]),re={components:{HelloWorld:O,TopBar:P,ContentRootSection:ce}},ie={class:"home-container"};function de(p,a,d,e,f,_){const g=A("TopBar"),t=A("ContentRootSection");return r(),i(h,null,[k(g),n("div",ie,[k(t)])],64)}const _e=S(re,[["render",de],["__scopeId","data-v-05fb68b4"]]);export{_e as default};
