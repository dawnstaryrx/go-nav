import{T as y}from"./TopBar-CpGf_tp8.js";import{_ as b,r as i,g as x,c as D,a as g,b as s,w as C,k as d,v as c,n as P,t as _,m as B,F as R,q as r,p as T,d as f,e as V,x as k}from"./index-DNkYr-Dp.js";import{u as w}from"./user-1tW7kAz0.js";import"./userInfo-C0I0oh51.js";import"./logo-Ox0-xbTo.js";const q={components:{TopBar:y},setup(){const a=i({email:"",code:"",password:"",rePassword:""}),e=i(!1),l=i(60),o=i(null),v=x(()=>e.value?`${l.value}s 后重试`:"发送"),u=n=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n),m=async()=>{if(!e.value){if(!u(a.value.email)){r.message("请输入有效的邮箱地址","danger");return}e.value=!0;try{const n=await w.sendCode(a.value.email,1);console.log(n),r.message("验证码已发送","success"),o.value=setInterval(()=>{l.value>0?l.value--:(clearInterval(o.value),e.value=!1,l.value=60)},1e3)}catch{r.message("发送验证码失败，请稍后再试","danger"),e.value=!1}}},p=T();return{registerData:a,sendCode:m,isSending:e,sendButtonText:v,handleRegister:async()=>{if(!u(a.value.email)){r.message("请输入有效的邮箱地址","danger");return}if(a.value.password!==a.value.rePassword){r.message("两次密码输入不一致","danger");return}(await w.register(a.value)).code===0&&(r.message("注册成功！"),a.value={},p.push("/login"))}}}},U={class:"login-container"},E={class:"card login-container-card noto-serif-sc-text"},S={class:"card-body"},I={class:"col-md-12"},N={class:"input-group",style:{margin:"0px"}},z={class:"col-md-12"},F={class:"col-md-12"},M={class:"row"},A={class:"col text-start"};function j(a,e,l,o,v,u){const m=f("TopBar"),p=f("router-link");return V(),D(R,null,[g(m,{style:{opacity:"0.8",color:"aliceblue"}}),s("div",U,[s("div",E,[s("div",S,[e[12]||(e[12]=s("div",{class:"row login-container-card-type"},[s("div",{style:{"text-align":"center","font-size":"20px","font-weight":"900",color:"#de7622"}}," 注册 ")],-1)),s("form",{onSubmit:e[5]||(e[5]=C((...t)=>o.handleRegister&&o.handleRegister(...t),["prevent"])),class:"row g-3"},[s("div",I,[e[6]||(e[6]=s("label",{for:"validationEmail",class:"form-label"},"邮箱",-1)),d(s("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.registerData.email=t),type:"email",class:"form-control",placeholder:"请输入邮箱",id:"validationEmail",required:""},null,512),[[c,o.registerData.email]])]),e[9]||(e[9]=s("label",{for:"validationCode",class:"form-label"},"验证码",-1)),s("div",N,[d(s("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.registerData.code=t),type:"text",class:"form-control",placeholder:"请输入验证码",id:"validationCode",required:""},null,512),[[c,o.registerData.code]]),s("span",{class:P(["input-group-text",{disabled:o.isSending}]),onClick:e[2]||(e[2]=(...t)=>o.sendCode&&o.sendCode(...t)),style:{cursor:"pointer"}},_(o.sendButtonText),3)]),s("div",z,[e[7]||(e[7]=s("label",{for:"validationPwd",class:"form-label"},"密码",-1)),d(s("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>o.registerData.password=t),type:"password",class:"form-control",placeholder:"请输入密码",id:"validationPwd",required:""},null,512),[[c,o.registerData.password]])]),s("div",F,[e[8]||(e[8]=s("label",{for:"validationRePwd",class:"form-label"},"确认密码",-1)),d(s("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>o.registerData.rePassword=t),type:"password",class:"form-control",placeholder:"请再次输入密码",id:"validationRePwd",required:""},null,512),[[c,o.registerData.rePassword]])]),e[10]||(e[10]=s("div",{class:"col-12"},[s("button",{class:"btn btn-primary col-12",type:"submit"},"注册")],-1))],32),s("div",M,[s("span",A,[g(p,{to:"/login",style:{"text-decoration":"none"}},{default:B(()=>e[11]||(e[11]=[k(" 已有账号，去登录！ ")])),_:1})])])])])])],64)}const Q=b(q,[["render",j],["__scopeId","data-v-447107f0"]]);export{Q as default};
