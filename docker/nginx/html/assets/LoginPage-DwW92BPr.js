import{T as J}from"./TopBar-CpGf_tp8.js";import{u as g}from"./user-1tW7kAz0.js";import{_ as G,r as i,u as Q,g as Y,o as j,c as w,a as A,b as e,n as x,w as N,k as b,v as m,l as U,t as _,m as k,F as $,p as oo,s as P,q as d,d as H,e as I,x as L}from"./index-DNkYr-Dp.js";import{u as R}from"./userInfo-C0I0oh51.js";import"./logo-Ox0-xbTo.js";const eo="data:image/png;base64,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",to={components:{TopBar:J},setup(){const p=oo(),o=i(0),f=i({username:"",password:""}),t=i({email:"",code:""}),l=i(!1),r=i(60),c=i(null),v=Q(),a=Y(()=>l.value?`${r.value}s 后重试`:"发送"),C=i({github:"",linuxdo:""}),S=async()=>{const s=await P.getSetting("login_github");C.value.github=s.data.valueVarchar;const n=await P.getSetting("login_linuxdo");C.value.linuxdo=n.data.valueVarchar};j(()=>{S()});const h=s=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s),q=async()=>{if(!l.value){if(!h(t.value.email)){d.message("请输入有效的邮箱地址","danger");return}l.value=!0;try{const s=await g.sendCode(t.value.email,2);console.log(s),d.message("验证码已发送","success"),c.value=setInterval(()=>{r.value>0?r.value--:(clearInterval(c.value),l.value=!1,r.value=60)},1e3)}catch{d.message("发送验证码失败，请稍后再试","danger"),l.value=!1}}},T=async()=>(await g.getCurrentUser()).data,E=async()=>{if(!h(t.value.email)){d.message("请输入有效的邮箱地址","danger");return}const s=await g.loginCode(t.value);if(s.code==0){d.message("登录成功！"),v.setToken(s.data);const n=await T();R().setInfo(n),p.push("/")}},B=async()=>{const s=await g.loginPassword(f.value);if(console.log(s.data),s.code==0){d.message("登录成功！","success"),v.setToken(s.data);const n=await T();R().setInfo(n),p.push("/")}},M=s=>{o.value=s},z="3TWBnE5AKbE3fPiAgAEee9MhvkbLy7Nh",W="https://gooodh.com/auth/linux-do/callback",O="https://connect.linux.do/oauth2/authorize",Z=()=>{const s=y(16);localStorage.setItem("oauth_state",s);const n=`${O}?response_type=code&client_id=${encodeURIComponent(z)}&redirect_uri=${encodeURIComponent(W)}&state=${s}`;window.location.href=n},V="Ov23lif4ExHJ7OXxoDVQ",F="https://gooodh.com/auth/github/callback",X="https://github.com/login/oauth/authorize",K=()=>{const s=y(16);localStorage.setItem("oauth_state",s);const n=`${X}?scope=user:email&client_id=${encodeURIComponent(V)}&redirect_uri=${encodeURIComponent(F)}&state=${s}`;window.location.href=n},y=s=>{const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let u="";for(let D=0;D<s;D++)u+=n.charAt(Math.floor(Math.random()*n.length));return u};return{loginType:o,changeLoginType:M,loginPasswordData:f,loginCodeData:t,isSending:l,countdown:r,timer:c,sendButtonText:a,sendCode:q,handleLoginCode:E,handleLoginPassword:B,loginWithLinuxDo:Z,loginWithGitHub:K,loginGitHubOrLinuxDo:C}}},so={class:"login-container"},ao={class:"card login-container-card noto-serif-sc-text"},no={class:"card-body"},lo={class:"row login-container-card-type"},io={class:"col-md-12"},ro={class:"col-md-12"},co={class:"col-md-12"},vo={class:"col-md-12"},uo={class:"input-group",style:{margin:"0px"}},go={class:"col text-center"},bo={class:"col text-center"},mo={class:"row"},po={class:"col text-start"},fo={class:"col text-end"};function Co(p,o,f,t,l,r){const c=H("TopBar"),v=H("router-link");return I(),w($,null,[A(c,{style:{opacity:"0.8",color:"aliceblue"}}),e("div",so,[e("div",ao,[e("div",no,[e("div",lo,[e("div",{onClick:o[0]||(o[0]=a=>t.changeLoginType(0)),class:x(t.loginType===0?"col login-type-active":"col login-type")}," 密码登录 ",2),e("div",{onClick:o[1]||(o[1]=a=>t.changeLoginType(1)),class:x(t.loginType===1?"col login-type-active":"col login-type")}," 免密登录 ",2)]),t.loginType===0?(I(),w("form",{key:0,onSubmit:o[4]||(o[4]=N((...a)=>t.handleLoginPassword&&t.handleLoginPassword(...a),["prevent"])),class:"row g-3"},[e("div",io,[o[11]||(o[11]=e("label",{for:"validationDefaultUsername",required:"",class:"form-label"},"用户名/邮箱",-1)),b(e("input",{"onUpdate:modelValue":o[2]||(o[2]=a=>t.loginPasswordData.username=a),type:"text",class:"form-control",placeholder:"请输入用户名或邮箱",id:"validationDefaultUsername","aria-describedby":"inputGroupPrepend2",required:""},null,512),[[m,t.loginPasswordData.username]])]),e("div",ro,[o[12]||(o[12]=e("label",{for:"validationDefault03",required:"",class:"form-label"},"密码",-1)),b(e("input",{"onUpdate:modelValue":o[3]||(o[3]=a=>t.loginPasswordData.password=a),type:"password",class:"form-control",placeholder:"请输入密码",id:"validationDefault03",required:""},null,512),[[m,t.loginPasswordData.password]])]),o[13]||(o[13]=U('<div class="col-12" data-v-ba426106><div class="form-check" data-v-ba426106><input class="form-check-input" type="checkbox" value="" id="invalidCheck2" data-v-ba426106><label class="form-check-label" for="invalidCheck2" data-v-ba426106> 记住我 </label></div></div><div class="col-12" data-v-ba426106><button class="btn btn-primary col-12" type="submit" data-v-ba426106>登录</button></div>',2))],32)):(I(),w("form",{key:1,onSubmit:o[8]||(o[8]=N((...a)=>t.handleLoginCode&&t.handleLoginCode(...a),["prevent"])),class:"row g-3"},[e("div",co,[o[14]||(o[14]=e("label",{for:"validationDefaultUsername",required:"",class:"form-label"},"邮箱",-1)),b(e("input",{"onUpdate:modelValue":o[5]||(o[5]=a=>t.loginCodeData.email=a),type:"text",class:"form-control",placeholder:"请输入邮箱",id:"validationDefaultUsername","aria-describedby":"inputGroupPrepend2",required:""},null,512),[[m,t.loginCodeData.email]])]),e("div",vo,[o[15]||(o[15]=e("label",{for:"validationDefault03",required:"",class:"form-label"},"验证码",-1)),e("div",uo,[b(e("input",{"onUpdate:modelValue":o[6]||(o[6]=a=>t.loginCodeData.code=a),type:"text",class:"form-control",placeholder:"请输入验证码",id:"validationCode",required:""},null,512),[[m,t.loginCodeData.code]]),e("span",{class:x(["input-group-text",{disabled:t.isSending}]),onClick:o[7]||(o[7]=(...a)=>t.sendCode&&t.sendCode(...a)),style:{cursor:"pointer"}},_(t.sendButtonText),3)])]),o[16]||(o[16]=U('<div class="col-12" data-v-ba426106><div class="form-check" data-v-ba426106><input class="form-check-input" type="checkbox" value="" id="invalidCheck2" data-v-ba426106><label class="form-check-label" for="invalidCheck2" data-v-ba426106> 记住我 </label></div></div><div class="col-12" data-v-ba426106><button class="btn btn-primary col-12" type="submit" data-v-ba426106>登录</button></div>',2))],32)),o[21]||(o[21]=e("div",{class:"line text-center"}," 第三方登录 ",-1)),e("div",null,[e("div",go,[o[17]||(o[17]=e("img",{src:eo,alt:"",height:"30px"},null,-1)),e("span",{onClick:o[9]||(o[9]=(...a)=>t.loginWithLinuxDo&&t.loginWithLinuxDo(...a)),style:{cursor:"pointer"}}," 使用LinuxDo账号登录 ")]),e("div",bo,[o[18]||(o[18]=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",viewBox:"0 0 32 32",fill:"none"},[e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M16 0C7.16 0 0 7.16 0 16C0 23.08 4.58 29.06 10.94 31.18C11.74 31.32 12.04 30.84 12.04 30.42C12.04 30.04 12.02 28.78 12.02 27.44C8 28.18 6.96 26.46 6.64 25.56C6.46 25.1 5.68 23.68 5 23.3C4.44 23 3.64 22.26 4.98 22.24C6.24 22.22 7.14 23.4 7.44 23.88C8.88 26.3 11.18 25.62 12.1 25.2C12.24 24.16 12.66 23.46 13.12 23.06C9.56 22.66 5.84 21.28 5.84 15.16C5.84 13.42 6.46 11.98 7.48 10.86C7.32 10.46 6.76 8.82 7.64 6.62C7.64 6.62 8.98 6.2 12.04 8.26C13.32 7.9 14.68 7.72 16.04 7.72C17.4 7.72 18.76 7.9 20.04 8.26C23.1 6.18 24.44 6.62 24.44 6.62C25.32 8.82 24.76 10.46 24.6 10.86C25.62 11.98 26.24 13.4 26.24 15.16C26.24 21.3 22.5 22.66 18.94 23.06C19.52 23.56 20.02 24.52 20.02 26.02C20.02 28.16 20 29.88 20 30.42C20 30.84 20.3 31.34 21.1 31.18C27.42 29.06 32 23.06 32 16C32 7.16 24.84 0 16 0V0Z",fill:"#24292E"})],-1)),e("span",{onClick:o[10]||(o[10]=(...a)=>t.loginWithGitHub&&t.loginWithGitHub(...a)),style:{cursor:"pointer"}}," 使用GitHub账号登录 ")])]),e("div",mo,[e("span",po,[A(v,{to:"/register",style:{"text-decoration":"none"}},{default:k(()=>o[19]||(o[19]=[L(" 没有账号，去注册！ ")])),_:1})]),e("span",fo,[A(v,{to:"/reset-pwd",style:{"text-decoration":"none"}},{default:k(()=>o[20]||(o[20]=[L(" 忘记密码？ ")])),_:1})])])])])])],64)}const To=G(to,[["render",Co],["__scopeId","data-v-ba426106"]]);export{To as default};
